"use strict";(self.webpackChunkFactuvar=self.webpackChunkFactuvar||[]).push([[403],{5403:(C,s,d)=>{d.r(s),d.d(s,{FacturaAvanzadoComponent:()=>U});var t=d(9212),n=d(95),m=d(707),_=d(7213),u=d(3370),f=d(4104),g=d(5219);function b(a,r){1&a&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Cantidad"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Descripci\xf3n"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Precio Unitario"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Importe"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"IVA"),t.qZA(),t._UZ(11,"th"),t.qZA())}function h(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",34),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"div",35),t._uU(6),t.qZA()(),t.TgZ(7,"td")(8,"div",36),t._uU(9),t.qZA()(),t.TgZ(10,"td")(11,"div",37),t._uU(12),t.qZA()(),t.TgZ(13,"td")(14,"div",38),t._uU(15),t.qZA()(),t.TgZ(16,"td")(17,"i",39),t.NdJ("click",function(){const l=t.CHM(e).rowIndex,o=t.oxw();return t.KtG(o.removeArticle(l))}),t.qZA()()()}if(2&a){const e=r.$implicit;t.xp6(3),t.hij(" ",e.unidades," "),t.xp6(3),t.hij(" ",e.descripcion," "),t.xp6(3),t.hij(" ",e.pUnitario," "),t.xp6(3),t.hij(" ",e.importe," "),t.xp6(3),t.hij(" ",e.iva," ")}}let v=(()=>{class a{constructor(){this.article={pUnitario:0,unidades:0,bImponible:0,cuotaIva:0,descripcion:"",importe:0,iva:0},this.articles=[],this.cantidad="",this.pacos=new t.vpe,this.articulos=new t.vpe}calculaImporte(){this.article.importe=this.article.unidades*this.article.pUnitario}emiteArticle(){this.articulos.emit({...this.article}),this.articles.push({...this.article}),this.article.unidades=0,this.article.descripcion="",this.article.pUnitario=0,this.article.importe=0,this.article.iva=0}removeArticle(e){this.pacos.emit(e),this.articles.splice(e,1)}static#t=this.\u0275fac=function(c){return new(c||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-articulo-factura"]],outputs:{pacos:"pacos",articulos:"articulos"},standalone:!0,features:[t.jDz],decls:54,vars:6,consts:[[1,"row"],["aria-label","cantidad","for","invoice_items_attributes_0_quantity",1,"col-2","form-label"],["aria-label","descripcion",1,"col-3","form-label"],["aria-label","precio unitario",1,"col-2","form-label"],["aria-label","importe",1,"col-2","form-label"],["aria-label","iva",1,"col-2","form-label"],[1,"col-1"],["id","items"],["type","hidden","name","invoice[items_attributes][0][id]","id","invoice_items_attributes_0_id","value","225899972","autocomplete","off"],["id","row_item_225899972",1,"row","mb-3"],[1,"col-2","form-group"],["type","text","name","invoice[items_attributes][0][quantity]","id","invoice_items_attributes_0_quantity","placeholder","Cant.","tabindex","225899972","maxlength","100",1,"form-control","form-control-sm","quantity",3,"ngModel","ngModelChange"],[1,"col-3","form-group"],["name","invoice[items_attributes][0][description]","id","invoice_items_attributes_0_description","placeholder","Descripci\xf3n","rows","2","maxlength","5000",1,"form-control","form-control-sm","description",3,"ngModel","ngModelChange"],["type","text","name","invoice[items_attributes][0][price]","id","invoice_items_attributes_0_price","placeholder","Precio unitario","tabindex","225899972","maxlength","100",1,"form-control","form-control-sm","price",3,"ngModel","ngModelChange"],["type","text","name","invoice[items_attributes][0][amount]","id","invoice_items_attributes_0_amount","placeholder","Importe","tabindex","225899972","maxlength","100","readonly","","disabled","",1,"form-control","form-control-sm","amount",3,"ngModel","ngModelChange"],["type","hidden","name","invoice[items_attributes][0][tax_rate_id]","id","invoice_items_attributes_0_tax_rate_id","autocomplete","off"],["type","hidden","name","invoice[items_attributes][0][tax_rate_id_2]","id","invoice_items_attributes_0_tax_rate_id_2","autocomplete","off"],["title","IVA","id","iva","name","iva",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","4"],["value","5"],["value","10"],["value","21"],["for","invoice_items_attributes_0_quantity","aria-label","cantidad",1,"col-2","form-label"],["aria-label","descripcion","for","invoice_items_attributes_0_description",1,"col-3","form-label"],["aria-label","precio unitario","for","invoice_items_attributes_0_price",1,"col-2","form-label"],["aria-label","importe","for","invoice_items_attributes_0_amount",1,"col-2","form-label"],["aria-label","iva","for","invoice_items_attributes_0_tax_rate_id",1,"col-2","form-label"],["aria-label","iva","for","invoice_items_attributes_0_tax_rate_id_2",1,"col-2","form-label"],["name","button","type","button","id","add-item",1,"btn","btn-info","btn-sm","w-100",3,"click"],[3,"value"],["pTemplate","header"],["pTemplate","body"],["id","unidades","contenteditable","false",1,"form-control",2,"width","auto"],["id","descripcion","contenteditable","false",1,"form-control",2,"width","auto"],["id","pUnitario","contenteditable","false",1,"form-control",2,"width","auto"],["id","importe","contenteditable","false",1,"form-control",2,"width","auto"],["id","iva","contenteditable","false",1,"form-control",2,"width","auto"],["title","Borrar art\xedculo",1,"fas","fa-times-circle","delete-item","acts-as-link","text-danger","fs-5",3,"click"]],template:function(c,i){1&c&&(t.TgZ(0,"div",0)(1,"label",1),t._uU(2,"Cant."),t.qZA(),t.TgZ(3,"label",2),t._uU(4,"Descripci\xf3n"),t.qZA(),t.TgZ(5,"label",3),t._uU(6,"Precio unitario"),t.qZA(),t.TgZ(7,"label",4),t._uU(8,"Importe"),t.qZA(),t.TgZ(9,"label",5),t._uU(10,"Tipo de IVA"),t.qZA(),t._UZ(11,"label",6),t.qZA(),t.TgZ(12,"div",7),t._UZ(13,"input",8),t.TgZ(14,"div",9)(15,"div",10)(16,"input",11),t.NdJ("ngModelChange",function(o){return i.article.unidades=o})("ngModelChange",function(){return i.calculaImporte()}),t.qZA()(),t.TgZ(17,"div",12)(18,"textarea",13),t.NdJ("ngModelChange",function(o){return i.article.descripcion=o}),t.qZA()(),t.TgZ(19,"div",10)(20,"input",14),t.NdJ("ngModelChange",function(o){return i.article.pUnitario=o})("ngModelChange",function(){return i.calculaImporte()}),t.qZA()(),t.TgZ(21,"div",10)(22,"input",15),t.NdJ("ngModelChange",function(o){return i.article.importe=o}),t.qZA()(),t.TgZ(23,"div",10),t._UZ(24,"input",16)(25,"input",17),t.TgZ(26,"select",18),t.NdJ("ngModelChange",function(o){return i.article.iva=o}),t.TgZ(27,"option",19),t._uU(28,"0%"),t.qZA(),t.TgZ(29,"option",20),t._uU(30,"4%"),t.qZA(),t.TgZ(31,"option",21),t._uU(32,"5%"),t.qZA(),t.TgZ(33,"option",22),t._uU(34,"10%"),t.qZA(),t.TgZ(35,"option",23),t._uU(36,"21%"),t.qZA()()()(),t.TgZ(37,"div",0)(38,"label",24),t._uU(39,"Cant."),t.qZA(),t.TgZ(40,"label",25),t._uU(41,"Descripci\xf3n"),t.qZA(),t.TgZ(42,"label",26),t._uU(43,"Precio unitario"),t.qZA(),t.TgZ(44,"label",27),t._uU(45,"Importe"),t.qZA(),t.TgZ(46,"label",28),t._uU(47,"Tipo de IVA"),t.qZA(),t._UZ(48,"label",29),t.TgZ(49,"button",30),t.NdJ("click",function(){return i.emiteArticle()}),t._uU(50," A\xf1adir art\xedculo "),t.qZA()(),t.TgZ(51,"p-table",31),t.YNc(52,b,12,0,"ng-template",32)(53,h,18,5,"ng-template",33),t.qZA()()),2&c&&(t.xp6(16),t.Q6J("ngModel",i.article.unidades),t.xp6(2),t.Q6J("ngModel",i.article.descripcion),t.xp6(2),t.Q6J("ngModel",i.article.pUnitario),t.xp6(2),t.Q6J("ngModel",i.article.importe),t.xp6(4),t.Q6J("ngModel",i.article.iva),t.xp6(25),t.Q6J("value",i.articles))},dependencies:[n.u5,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.nD,n.On,_.S,g.jx,u.U$,u.iA,f.EV,m.hJ],styles:["#descripcion[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}"]})}return a})();const p=a=>{const r={subTotal:0,importeTotal:0};return(a=>a.map(r=>({...r,bImponible:r.unidades*r.pUnitario,cuotaIva:r.unidades*r.pUnitario*r.iva/100})))(a).map(e=>{r.subTotal+=e.bImponible,r.importeTotal+=e.bImponible+e.cuotaIva}),r},A=["articuloFactura"];function T(a,r){}let U=(()=>{class a{constructor(){this.listaArticulos=[],this.ricias={subTotal:0,importeTotal:0}}addArticulo(e){this.listaArticulos.push(e),this.ricias=p(this.listaArticulos)}removeArticle(e){this.listaArticulos.splice(e,1),this.ricias=p(this.listaArticulos)}static#t=this.\u0275fac=function(c){return new(c||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-factura-avanzado"]],viewQuery:function(c,i){if(1&c&&t.Gf(A,5,t.s_b),2&c){let l;t.iGM(l=t.CRH())&&(i.articuloFactura=l.first)}},standalone:!0,features:[t.jDz],decls:76,vars:2,consts:[[1,"container-xl"],[1,"row","pb-4"],[1,"col-lg-10","col-md-11","mx-auto"],[1,"text-center"],[1,"fs-2","my-4"],[1,"px-4"],[1,"p-4","guest-page"],["id","invoice-form","action","#","accept-charset","UTF-8","data-remote","true","method","post",1,"edit_invoice"],[1,"row"],[1,"col-8"],["for","invoice_from",1,"form-label"],[1,"fa","fa-user","icon"],["placeholder","CIF del proveedor","tabindex","1","maxlength","10","type","text","name","proveedor","id","proveedor","required","",1,"form-control","form-control-sm"],[1,"col-4","col-md-3","offset-md-1"],["for","invoice_number",1,"form-label"],[1,"fa","fa-search","icon"],["placeholder","N\xfamero Factura","tabindex","4","maxlength","100","size","100","type","text","value","100","name","numeroFactura","id","numeroFactura",1,"form-control","form-control-sm"],["for","comprador",1,"form-label"],[1,"fa","fa-female","icon"],[1,"fa","fa-male","icon"],["placeholder","CIF del cliente","tabindex","1","maxlength","10","type","text","name","comprador","id","comprador","required","",1,"form-control","form-control-sm"],["for","descripcionOperacion",1,"form-label"],[1,"fa","fa-plane","icon"],["placeholder"," (Campo opcional)","rows","5","tabindex","3","maxlength","5000","name","descripcionOperacion","id","descripcionOperacion",1,"form-control","form-control-sm",2,"height","8em"],["for","FechaEmision",1,"form-label"],[1,"fa-solid","fa-calendar"],["placeholder","dd.mm.aa","tabindex","5","maxlength","100","autocomplete","off","size","100","type","text","value","10.01.2024","name","invoice[date_issued_string]","id","FechaEmision",1,"form-control","form-control-sm","datepicker","hasDatepicker"],["for","fechaCobro"],[1,"fa-solid","fa-calendar-check"],["type","date","id","fechaCobro","name","fechaCobro","value","2024-01-23",1,"form-control","form-control-sm","datepicker","hasDatepicker"],["for","pendientePago"],[1,"fa-solid","fa-wallet"],["id","pendientePago","name","pendientePago",1,"form-control","form-control-sm","datepicker","hasDatepicker"],["value","true"],["value","false"],[3,"pacos","articulos"],["articuloFactura",""],[1,"col-12"],["id","total"],[1,"row","mt-4"],[1,"col-6","col-md-3","offset-md-6","fs-6","fw-bold"],[1,"col-6","col-md-3","text-end","fs-6","fw-bold"],[1,"row","my-4"],[1,"col-6","col-md-3","offset-md-6","fs-5","fw-bold"],[1,"col-6","col-md-3","text-end","fs-5","fw-bold"],["data-placement","left"],["data-placement","left",2,"font-size","10px"]],template:function(c,i){1&c&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5,"Nueva Factura"),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"div")(12,"label",10),t._UZ(13,"i",11),t._uU(14,"\xa0\xa0De"),t.qZA(),t._UZ(15,"input",12),t.qZA()(),t.TgZ(16,"div",13)(17,"div")(18,"label",14),t._UZ(19,"i",15),t._uU(20,"\xa0N\xb0 de factura"),t.qZA(),t._UZ(21,"input",16),t.qZA()(),t.TgZ(22,"div",9)(23,"div")(24,"label",17),t._UZ(25,"i",18)(26,"i",19),t._uU(27,"\xa0\xa0Facturar a"),t.qZA(),t._UZ(28,"input",20),t.qZA(),t.TgZ(29,"div")(30,"label",21),t._UZ(31,"i",22),t._uU(32,"\xa0\xa0Descripci\xf3n de la operaci\xf3n"),t.qZA(),t._UZ(33,"textarea",23),t.qZA()(),t.TgZ(34,"div",13)(35,"div")(36,"label",24),t._UZ(37,"i",25),t._uU(38,"\xa0Fecha"),t.qZA(),t._UZ(39,"input",26),t.qZA(),t.TgZ(40,"div")(41,"label",27),t._UZ(42,"i",28),t._uU(43,"\xa0Fecha de Cobro"),t.qZA(),t._UZ(44,"input",29),t.qZA(),t.TgZ(45,"div")(46,"label",30),t._UZ(47,"i",31),t._uU(48,"\xa0Pendiente de Pago"),t.qZA(),t.TgZ(49,"select",32)(50,"option",33),t._uU(51,"S\xed"),t.qZA(),t.TgZ(52,"option",34),t._uU(53,"No"),t.qZA()()()()(),t._UZ(54,"hr"),t.TgZ(55,"app-articulo-factura",35),t.NdJ("pacos",function(o){return i.removeArticle(o)})("articulos",function(o){return i.addArticulo(o)}),t.qZA(),t.YNc(56,T,0,0,"ng-template",null,36,t.W1O),t.TgZ(58,"div",8),t._UZ(59,"div",37),t.qZA(),t._UZ(60,"hr"),t.TgZ(61,"div",38)(62,"div",39)(63,"div",40),t._uU(64," Subtotal "),t.qZA(),t.TgZ(65,"div",41),t._uU(66),t.qZA()(),t.TgZ(67,"div",42)(68,"div",43)(69,"p"),t._uU(70,"TOTAL"),t.qZA()(),t.TgZ(71,"div",44)(72,"p",45),t._uU(73),t.qZA(),t.TgZ(74,"span",46),t._uU(75," IVA/incl. "),t.qZA()()()()()()()()()()),2&c&&(t.xp6(66),t.hij("",i.ricias.subTotal," \u20ac"),t.xp6(7),t.hij("",i.ricias.importeTotal," \u20ac"))},dependencies:[v,n.u5,n._Y,n.YN,n.Kr,n.JL,n.F],styles:['[_ngcontent-%COMP%]:root{--bs-blue: #0d6efd;--bs-indigo: #6610f2;--bs-purple: #6f42c1;--bs-pink: #d63384;--bs-red: #dc3545;--bs-orange: #fd7e14;--bs-yellow: #ffc107;--bs-green: #198754;--bs-teal: #20c997;--bs-cyan: #0dcaf0;--bs-white: #fff;--bs-gray: #6c757d;--bs-gray-dark: #343a40;--bs-primary: #264f88;--bs-secondary: #6c757d;--bs-success: #198754;--bs-info: #fff3c0;--bs-warning: #fd7e14;--bs-danger: #dc3545;--bs-light: #f8f9fa;--bs-dark: #212529;--bs-font-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--bs-font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;--bs-gradient: linear-gradient( 180deg, rgba(255, 255, 255, .15), rgba(255, 255, 255, 0) )}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}form[_ngcontent-%COMP%]{display:block;margin-top:0}.row[_ngcontent-%COMP%]{--bs-gutter-x: 1.5rem;--bs-gutter-y: 0;display:flex;flex-wrap:wrap;margin-top:calc(var(--bs-gutter-y) * -1);margin-right:calc(var(--bs-gutter-x) / -2);margin-left:calc(var(--bs-gutter-x) / -2)}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], select[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input[type=hidden i][_ngcontent-%COMP%]{appearance:none;background-color:initial;cursor:default;display:none!important;padding:initial;border:initial;border-color:initial;border-radius:initial}input[_ngcontent-%COMP%]{text-rendering:auto;color:fieldtext;letter-spacing:normal;word-spacing:normal;line-height:normal;text-transform:none;text-indent:0px;text-shadow:none;display:inline-block;text-align:start;appearance:auto;-webkit-rtl-ordering:logical;cursor:text;background-color:field;margin:0;padding:1px 0;border-width:2px;border-style:inset;border-color:-internal-light-dark(rgb(118,118,118),rgb(133,133,133));border-image:initial;padding-block:1px;padding-inline:2px}']})}return a})()}}]);